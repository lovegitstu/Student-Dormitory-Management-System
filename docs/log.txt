14:53:52.504 [http-nio-9528-exec-81] INFO  c.s.f.w.s.PermissionService - [hasPermi,42] - === 权限验证开始 ===
14:53:52.504 [http-nio-9528-exec-81] INFO  c.s.f.w.s.PermissionService - [hasPermi,43] - 检查权限: dormitory:exchange:approve
14:53:52.505 [http-nio-9528-exec-81] INFO  c.s.f.w.s.PermissionService - [hasPermi,58] - 当前登录用户: 吕阿姨
14:53:52.505 [http-nio-9528-exec-81] INFO  c.s.f.w.s.PermissionService - [hasPermi,59] - 用户ID: 101
14:53:52.505 [http-nio-9528-exec-81] INFO  c.s.f.w.s.PermissionService - [hasPermi,67] - 用户拥有的权限列表: [dormitory:dorm:list, dormitory:contest:list, dormitory:out:query, dormitory:floor:add, dormitory:out:confirmReturn, system:notice:remove, dormitory:bills:remove, dormitory:floor:remove, dormitory:dorm:edit, dormitory:contest:edit, dormitory:visit:query, dormitory:statistics:view, dormitory:floor:query, dormitory:bed:add, dormitory:dorm:remove, dormitory:exchange:query, system:notice:list, dormitory:repair:list, dormitory:visit:list, system:notice:query, dormitory:come:list, system:notice:edit, dormitory:bed:list, dormitory:contest:remove, dormitory:floor:list, dormitory:dorm:query, dormitory:bills:edit, dormitory:exchange:list, dormitory:exchange:approve, dormitory:dorm:add, dormitory:bills:add, dormitory:contest:query, dormitory:floor:edit, dormitory:visit:approve, dormitory:repair:export, dormitory:student:remove, dormitory:repair:approve, dormitory:student:query, dormitory:come:query, dormitory:bills:list, dormitory:out:list, dormitory:exchange:remove, dormitory:come:approve, dormitory:bills:query, dormitory:bed:remove, dormitory:bed:edit, system:notice:add, dormitory:contest:add, dormitory:bed:query, dormitory:repair:remove, dormitory:out:approve, dormitory:repair:query, dormitory:out:edit, dormitory:student:list, dormitory:bills:recharge, dormitory:statistics:manager]
14:53:52.505 [http-nio-9528-exec-81] INFO  c.s.f.w.s.PermissionService - [hasPermi,72] - 权限验证结果: true
14:53:52.505 [http-nio-9528-exec-81] INFO  c.s.f.w.s.PermissionService - [hasPermi,73] - === 权限验证结束 ===
=== 开始审批换宿申请 ===
申请ID: 123, 审批意见: 1
14:53:52.506 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.updateDormExchange - [debug,137] - ==>  Preparing: update dorm_exchange SET opinion = ?, update_time = ? where id = ?
14:53:52.507 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.updateDormExchange - [debug,137] - ==> Parameters: 1(Long), 2025-10-28 14:53:52.506(Timestamp), 123(Long)
14:53:52.542 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.updateDormExchange - [debug,137] - <==    Updates: 1
审核通过，开始更新床位分配
14:53:52.543 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.selectDormExchangeById - [debug,137] - ==>  Preparing: select de.*,df.*,dd.* from dorm_exchange de left join dorm_floor df on df.f_id = de.f_id left join dorm_dormitory dd on dd.dor_id = de.dor_id where id = ?
14:53:52.544 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.selectDormExchangeById - [debug,137] - ==> Parameters: 123(Long)
14:53:52.546 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.selectDormExchangeById - [debug,137] - <==      Total: 1
申请详情 - 学生ID: 102, 学生姓名: 王五, 申请记录中的原床位ID: 117, 新床位ID: 118
14:53:52.547 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.selectDormBedByBedId - [debug,137] - ==>  Preparing: select b.bed_id, b.dor_id, b.stu_id, b.bed_code, b.bed_status, b.bed_record_id, b.create_time, b.update_time, b.create_by, b.update_by, b.remark, d.dor_name, d.f_id, s.stu_code, s.stu_name, s.user_id from dorm_bed b left join dorm_dormitory d on b.dor_id = d.dor_id left join dorm_student s on b.stu_id = s.stu_id where b.bed_id = ?
14:53:52.547 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.selectDormBedByBedId - [debug,137] - ==> Parameters: 118(Long)
14:53:52.548 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.selectDormBedByBedId - [debug,137] - <==      Total: 1
=== DormBedServiceImpl.selectDormBedList 开始 ===
查询参数 - stuId: 102, bedStatus: 1
查询参数 - dorId: null, bedCode: null
14:53:52.549 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.selectDormBedList - [debug,137] - ==>  Preparing: select b.bed_id, b.dor_id, b.stu_id, b.bed_code, b.bed_status, b.bed_record_id, b.create_time, b.update_time, b.create_by, b.update_by, b.remark, d.dor_name, d.f_id, s.stu_code, s.stu_name, s.user_id from dorm_bed b left join dorm_dormitory d on b.dor_id = d.dor_id left join dorm_student s on b.stu_id = s.stu_id WHERE b.stu_id = ? and b.bed_status = ?
14:53:52.550 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.selectDormBedList - [debug,137] - ==> Parameters: 102(Long), 1(String)
14:53:52.551 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.selectDormBedList - [debug,137] - <==      Total: 1
查询结果数量: 1
结果[0] - bedId: 117, dorId: 100, stuId: 102, stuName: 王五, bedCode: 3, bedStatus: 1
=== DormBedServiceImpl.selectDormBedList 结束 ===
申请学生当前实际入住的床位数量: 1
开始释放申请学生的床位: 117 (学生ID: 102)
14:53:52.553 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.selectDormBedByBedId - [debug,137] - ==>  Preparing: select b.bed_id, b.dor_id, b.stu_id, b.bed_code, b.bed_status, b.bed_record_id, b.create_time, b.update_time, b.create_by, b.update_by, b.remark, d.dor_name, d.f_id, s.stu_code, s.stu_name, s.user_id from dorm_bed b left join dorm_dormitory d on b.dor_id = d.dor_id left join dorm_student s on b.stu_id = s.stu_id where b.bed_id = ?
14:53:52.554 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.selectDormBedByBedId - [debug,137] - ==> Parameters: 117(Long)
14:53:52.555 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.selectDormBedByBedId - [debug,137] - <==      Total: 1
14:53:52.555 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.updateDormBed - [debug,137] - ==>  Preparing: update dorm_bed SET stu_id = ?, bed_status = ?, update_time = ? where bed_id = ?
14:53:52.556 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.updateDormBed - [debug,137] - ==> Parameters: null, 0(String), 2025-10-28 14:53:52.553(Timestamp), 117(Long)
14:53:52.558 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.updateDormBed - [debug,137] - <==    Updates: 1
14:53:52.558 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.selectDormStudentByStuId - [debug,137] - ==>  Preparing: select stu_id, stu_code, stu_name, stu_sex, stu_age, stu_phone, stu_photo, stu_major, dor_id, f_id, user_id, stu_status, status, del_flag, create_by, create_time, update_by, update_time, remark from dorm_student where stu_id = ?
14:53:52.559 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.selectDormStudentByStuId - [debug,137] - ==> Parameters: 102(Long)
14:53:52.560 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.selectDormStudentByStuId - [debug,137] - <==      Total: 1
14:53:52.560 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.updateDormStudent - [debug,137] - ==>  Preparing: update dorm_student SET stu_status = ?, update_time = ? where stu_id = ?
14:53:52.561 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.updateDormStudent - [debug,137] - ==> Parameters: 0(String), 2025-10-28 14:53:52.56(Timestamp), 102(Long)
14:53:52.563 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.updateDormStudent - [debug,137] - <==    Updates: 1
释放床位 117 结果: 成功
开始分配新床位: 118 给学生: 102 (王五)
14:53:52.567 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.selectDormStudentByStuId - [debug,137] - ==>  Preparing: select stu_id, stu_code, stu_name, stu_sex, stu_age, stu_phone, stu_photo, stu_major, dor_id, f_id, user_id, stu_status, status, del_flag, create_by, create_time, update_by, update_time, remark from dorm_student where stu_id = ?
14:53:52.568 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.selectDormStudentByStuId - [debug,137] - ==> Parameters: 102(Long)
14:53:52.569 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.selectDormStudentByStuId - [debug,137] - <==      Total: 1
14:53:52.570 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.selectDormBedList - [debug,137] - ==>  Preparing: select b.bed_id, b.dor_id, b.stu_id, b.bed_code, b.bed_status, b.bed_record_id, b.create_time, b.update_time, b.create_by, b.update_by, b.remark, d.dor_name, d.f_id, s.stu_code, s.stu_name, s.user_id from dorm_bed b left join dorm_dormitory d on b.dor_id = d.dor_id left join dorm_student s on b.stu_id = s.stu_id WHERE b.stu_id = ? and b.bed_status = ?
14:53:52.570 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.selectDormBedList - [debug,137] - ==> Parameters: 102(Long), 1(String)
14:53:52.571 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.selectDormBedList - [debug,137] - <==      Total: 0
14:53:52.572 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.selectDormBedByBedId - [debug,137] - ==>  Preparing: select b.bed_id, b.dor_id, b.stu_id, b.bed_code, b.bed_status, b.bed_record_id, b.create_time, b.update_time, b.create_by, b.update_by, b.remark, d.dor_name, d.f_id, s.stu_code, s.stu_name, s.user_id from dorm_bed b left join dorm_dormitory d on b.dor_id = d.dor_id left join dorm_student s on b.stu_id = s.stu_id where b.bed_id = ?
14:53:52.572 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.selectDormBedByBedId - [debug,137] - ==> Parameters: 118(Long)
14:53:52.573 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.selectDormBedByBedId - [debug,137] - <==      Total: 1
14:53:52.574 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.updateDormBed - [debug,137] - ==>  Preparing: update dorm_bed SET stu_id = ?, bed_status = ?, update_time = ? where bed_id = ?
14:53:52.574 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.updateDormBed - [debug,137] - ==> Parameters: 102(Long), 1(String), 2025-10-28 14:53:52.571(Timestamp), 118(Long)
14:53:52.577 [http-nio-9528-exec-81] DEBUG c.s.d.m.D.updateDormBed - [debug,137] - <==    Updates: 1
14:53:52.590 [http-nio-9528-exec-81] ERROR c.s.f.w.e.GlobalExceptionHandler - [handleRuntimeException,142] - 请求地址'/dormitory/exchange/approve/123',发生未知异常.
java.lang.RuntimeException: 学生ID或宿舍ID不能为空
	at com.springboot.dorm.service.impl.DormBedServiceImpl.updateStudentDormInfo(DormBedServiceImpl.java:195)
	at com.springboot.dorm.service.impl.DormBedServiceImpl.updateDormBed(DormBedServiceImpl.java:135)
	at com.springboot.dorm.service.impl.DormBedServiceImpl$$FastClassBySpringCGLIB$$bf6b4109.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.springboot.dorm.service.impl.DormBedServiceImpl$$EnhancerBySpringCGLIB$$507daf0d.updateDormBed(<generated>)
	at com.springboot.dorm.service.impl.DormExchangeServiceImpl.approveDormExchange(DormExchangeServiceImpl.java:231)
	at com.springboot.dorm.controller.DormExchangeController.approve(DormExchangeController.java:152)
	at com.springboot.dorm.controller.DormExchangeController$$FastClassBySpringCGLIB$$10e722b1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:58)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.springboot.dorm.controller.DormExchangeController$$EnhancerBySpringCGLIB$$b098a290.approve(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:920)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:558)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.alibaba.druid.support.http.WebStatFilter.doFilter(WebStatFilter.java:114)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.springboot.common.filter.RepeatableFilter.doFilter(RepeatableFilter.java:43)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at com.springboot.framework.security.filter.JwtAuthenticationTokenFilter.doFilterInternal(JwtAuthenticationTokenFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
14:53:52.593 [http-nio-9528-exec-81] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - [logException,208] - Resolved [java.lang.RuntimeException: 学生ID或宿舍ID不能为空]
14:53:52.600 [schedule-pool-1] DEBUG c.s.s.m.S.insertOperlog - [debug,137] - ==>  Preparing: insert into sys_oper_log(title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, cost_time, oper_time) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, sysdate())
14:53:52.601 [schedule-pool-1] DEBUG c.s.s.m.S.insertOperlog - [debug,137] - ==> Parameters: 换宿申请审批(String), 2(Integer), com.springboot.dorm.controller.DormExchangeController.approve()(String), PUT(String), 1(Integer), 吕阿姨(String), null, /dormitory/exchange/approve/123(String), 127.0.0.1(String), 内网IP(String), 123 {"id":123,"opinion":1,"params":{},"updateTime":"2025-10-28 14:53:52"}(String), null, 1(Integer), 学生ID或宿舍ID不能为空(String), 78(Long)
14:53:52.606 [schedule-pool-1] DEBUG c.s.s.m.S.insertOperlog - [debug,137] - <==    Updates: 1
